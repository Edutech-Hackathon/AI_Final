# OpenAI API 상호작용을 위한 프롬프트 템플릿

class PromptTemplates:
    """관리되는 프롬프트 템플릿 모음"""
    
    @staticmethod
    def get_summary_prompt(text, level_info):
        """텍스트 요약을 위한 프롬프트 생성"""
        return f"""
당신은 한국의 {level_info['description'].split('(')[0]} 수준의 학생들을 가르치는 선생님입니다.
다음 텍스트를 이 학생들이 이해하기 쉽도록 요약하고 설명해주세요.

요약 규칙:
1. {level_info['vocabulary']}만 사용하세요
2. {level_info['sentence_length']}을 사용하세요
3. 어려운 개념은 일상생활의 쉬운 비유로 설명하세요
4. 핵심 내용을 3-5개의 포인트로 정리하세요
5. 전문용어가 나오면 괄호 안에 쉬운 설명을 추가하세요

원본 텍스트:
{text}

요약 형식:
📌 **핵심 요약**
[핵심 내용을 한 문장으로]

📝 **주요 내용**
1. [첫 번째 중요한 점]
2. [두 번째 중요한 점]
3. [세 번째 중요한 점]

💡 **쉽게 이해하기**
[일상생활 비유나 예시로 설명]

🔑 **꼭 기억할 단어**
- 단어1: 쉬운 설명
- 단어2: 쉬운 설명
"""

    @staticmethod
    def get_quiz_prompt(text, summary, quiz_type, count):
        """퀴즈 생성을 위한 프롬프트"""
        
        if quiz_type == "OX 퀴즈":
            return f"""
다음 텍스트와 요약을 바탕으로 {count}개의 OX 퀴즈를 만들어주세요.

원본 텍스트:
{text}

요약:
{summary}

요구사항:
1. 내용 이해를 확인할 수 있는 문제
2. 명확하게 O 또는 X로 답할 수 있는 문장
3. 너무 쉽거나 너무 어렵지 않은 적절한 난이도
4. 각 문제마다 정답과 간단한 해설 포함

JSON 형식으로 응답하세요:
{{
    "questions": [
        {{
            "id": 1,
            "question": "문제 내용",
            "answer": "O" 또는 "X",
            "explanation": "정답 해설"
        }}
    ]
}}
"""
        
        elif quiz_type == "객관식 퀴즈":
            return f"""
다음 텍스트와 요약을 바탕으로 {count}개의 4지선다 객관식 문제를 만들어주세요.

원본 텍스트:
{text}

요약:
{summary}

요구사항:
1. 내용의 핵심을 묻는 문제
2. 각 선택지는 그럴듯하게 작성
3. 정답은 명확하게 하나만
4. 각 문제마다 정답과 해설 포함

JSON 형식으로 응답하세요:
{{
    "questions": [
        {{
            "id": 1,
            "question": "문제 내용",
            "options": ["선택지1", "선택지2", "선택지3", "선택지4"],
            "answer": 0,
            "explanation": "정답 해설"
        }}
    ]
}}
"""
        
        else:  # 빈칸 채우기
            return f"""
다음 텍스트와 요약을 바탕으로 {count}개의 빈칸 채우기 문제를 만들어주세요.

원본 텍스트:
{text}

요약:
{summary}

요구사항:
1. 핵심 단어나 개념을 빈칸으로
2. 문맥으로 답을 유추할 수 있도록
3. 빈칸은 _____로 표시
4. 각 문제마다 정답과 해설 포함

JSON 형식으로 응답하세요:
{{
    "questions": [
        {{
            "id": 1,
            "question": "_____ 포함된 문장",
            "answer": "정답",
            "explanation": "정답 해설"
        }}
    ]
}}
"""

    @staticmethod
    def get_feedback_prompt(quiz_results):
        """퀴즈 결과에 대한 피드백 생성 프롬프트"""
        return f"""
학생의 퀴즈 결과를 보고 격려하는 피드백을 작성해주세요.

퀴즈 결과:
- 전체 문제 수: {quiz_results['total']}
- 정답 수: {quiz_results['correct']}
- 정답률: {quiz_results['percentage']}%

피드백 요구사항:
1. 긍정적이고 격려하는 톤
2. 잘한 점 강조
3. 개선할 점은 부드럽게 제안
4. 구체적인 학습 조언 1-2개
5. 이모지를 적절히 사용

피드백 형식:
🎯 **전체 평가**
[전반적인 수행 평가]

✨ **잘한 점**
[구체적으로 잘한 부분]

💪 **더 노력하면 좋을 점**
[개선 제안]

📚 **학습 팁**
[구체적인 학습 방법 제안]
"""

    @staticmethod
    def get_explanation_prompt(text, difficult_part):
        """어려운 부분에 대한 추가 설명 프롬프트"""
        return f"""
다음 텍스트에서 학생이 이해하기 어려워하는 부분을 더 쉽게 설명해주세요.

원본 텍스트:
{text}

어려운 부분:
{difficult_part}

설명 요구사항:
1. 초등학생도 이해할 수 있는 쉬운 말로
2. 구체적인 예시 2개 이상
3. 일상생활과 연결된 비유
4. 단계별로 차근차근 설명
5. 시각적으로 상상할 수 있도록

설명 형식:
🤔 **어려운 부분**
[어려운 개념 정리]

👶 **쉽게 말하면**
[아주 쉬운 말로 다시 설명]

🎈 **예시로 이해하기**
예시 1: [일상생활 예시]
예시 2: [친숙한 상황 예시]

🎯 **핵심 정리**
[한 줄로 정리]
"""
